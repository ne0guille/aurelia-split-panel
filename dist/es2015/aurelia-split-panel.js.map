{"version":3,"sources":["aurelia-split-panel.js","../src/aurelia-split-panel.ts"],"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","exports","value","aurelia_event_aggregator_1","require","aurelia_framework_1","split_service_1","split_constants_1","SplitPanelCustomAttribute","element","taskQueue","ea","splitService","minSize","gutterSize","vertical","cursor","initialize","subscriptions","prototype","attached","_this","isVertical","JSON","parse","options","sizes","direction","splitDirection","horizontal","queueMicroTask","initializeSplit","push","subscribe","splitEvents","create","destroy","destroySplit","setSize","setSizes","detached","forEach","subs","dispose","verticalChanged","newValue","undefined","splitOptions","splitjs","bindable","defaultBindingMode","bindingMode","oneWay","primaryProperty","inject","Element","TaskQueue","EventAggregator","SplitService"],"mappings":"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","file":"aurelia-split-panel.js","sourceRoot":"/source/","sourcesContent":["\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar aurelia_event_aggregator_1 = require(\"aurelia-event-aggregator\");\nvar aurelia_framework_1 = require(\"aurelia-framework\");\nvar split_service_1 = require(\"./split-service\");\nvar split_constants_1 = require(\"./split-constants\");\nvar SplitPanelCustomAttribute = (function () {\n    function SplitPanelCustomAttribute(element, taskQueue, ea, splitService) {\n        this.element = element;\n        this.taskQueue = taskQueue;\n        this.ea = ea;\n        this.splitService = splitService;\n        this.minSize = 100;\n        this.gutterSize = 10;\n        this.vertical = false;\n        this.cursor = 'grabbing';\n        this.initialize = true;\n        this.subscriptions = [];\n    }\n    SplitPanelCustomAttribute.prototype.attached = function () {\n        var _this = this;\n        var isVertical = typeof this.vertical === \"string\" ? JSON.parse(this.vertical) : this.vertical;\n        this.options = {\n            sizes: this.sizes,\n            minSize: this.minSize,\n            gutterSize: this.gutterSize,\n            direction: isVertical ? split_constants_1.splitDirection.vertical : split_constants_1.splitDirection.horizontal,\n            cursor: this.cursor\n        };\n        if (this.initialize)\n            this.taskQueue.queueMicroTask(function () { return _this.initializeSplit(); });\n        this.subscriptions.push(this.ea.subscribe(split_constants_1.splitEvents.create, function (options) { return _this.initializeSplit(options); }), this.ea.subscribe(split_constants_1.splitEvents.destroy, function () { return _this.destroySplit(); }), this.ea.subscribe(split_constants_1.splitEvents.setSize, function (sizes) { return _this.setSizes(sizes); }));\n    };\n    SplitPanelCustomAttribute.prototype.detached = function () {\n        this.destroySplit();\n        this.subscriptions.forEach(function (subs) { return subs.dispose(); });\n    };\n    SplitPanelCustomAttribute.prototype.verticalChanged = function (newValue) {\n        if (newValue !== undefined && this.options) {\n            this.options.direction = newValue;\n        }\n    };\n    SplitPanelCustomAttribute.prototype.initializeSplit = function (options) {\n        this.destroySplit();\n        var splitOptions = options || this.options;\n        this.splitjs = this.splitService.initialize(this.element, splitOptions);\n    };\n    SplitPanelCustomAttribute.prototype.destroySplit = function () {\n        if (this.splitjs !== undefined)\n            this.splitjs = this.splitjs.destroy();\n    };\n    SplitPanelCustomAttribute.prototype.setSizes = function (sizes) {\n        if (this.splitjs !== undefined)\n            this.splitjs.setSizes(sizes);\n    };\n    __decorate([\n        aurelia_framework_1.bindable({ defaultBindingMode: aurelia_framework_1.bindingMode.oneWay, primaryProperty: true })\n    ], SplitPanelCustomAttribute.prototype, \"sizes\", void 0);\n    __decorate([\n        aurelia_framework_1.bindable({ defaultBindingMode: aurelia_framework_1.bindingMode.oneWay })\n    ], SplitPanelCustomAttribute.prototype, \"minSize\", void 0);\n    __decorate([\n        aurelia_framework_1.bindable({ defaultBindingMode: aurelia_framework_1.bindingMode.oneWay })\n    ], SplitPanelCustomAttribute.prototype, \"gutterSize\", void 0);\n    __decorate([\n        aurelia_framework_1.bindable({ defaultBindingMode: aurelia_framework_1.bindingMode.oneWay })\n    ], SplitPanelCustomAttribute.prototype, \"vertical\", void 0);\n    __decorate([\n        aurelia_framework_1.bindable({ defaultBindingMode: aurelia_framework_1.bindingMode.oneWay })\n    ], SplitPanelCustomAttribute.prototype, \"cursor\", void 0);\n    __decorate([\n        aurelia_framework_1.bindable({ defaultBindingMode: aurelia_framework_1.bindingMode.oneWay })\n    ], SplitPanelCustomAttribute.prototype, \"initialize\", void 0);\n    SplitPanelCustomAttribute = __decorate([\n        aurelia_framework_1.inject(Element, aurelia_framework_1.TaskQueue, aurelia_event_aggregator_1.EventAggregator, split_service_1.SplitService)\n    ], SplitPanelCustomAttribute);\n    return SplitPanelCustomAttribute;\n}());\nexports.SplitPanelCustomAttribute = SplitPanelCustomAttribute;\n","import { EventAggregator, Subscription } from 'aurelia-event-aggregator';\r\nimport { bindable, bindingMode, inject, TaskQueue } from 'aurelia-framework';\r\n\r\nimport { SplitOptions, SplitService } from './split-service';\r\nimport { splitDirection, splitEvents } from \"./split-constants\";\r\n\r\n@inject(Element, TaskQueue, EventAggregator, SplitService)\r\nexport class SplitPanelCustomAttribute {\r\n  @bindable({ defaultBindingMode: bindingMode.oneWay, primaryProperty: true }) sizes: Array<number>;\r\n  @bindable({ defaultBindingMode: bindingMode.oneWay }) minSize: Array<number> | number = 100;\r\n  @bindable({ defaultBindingMode: bindingMode.oneWay }) gutterSize: number = 10;\r\n  @bindable({ defaultBindingMode: bindingMode.oneWay }) vertical: boolean = false;\r\n  @bindable({ defaultBindingMode: bindingMode.oneWay }) cursor: string = 'grabbing';\r\n  @bindable({ defaultBindingMode: bindingMode.oneWay }) initialize: boolean = true;\r\n\r\n  private splitjs: any;\r\n  private options: SplitOptions;\r\n  private subscriptions: Subscription[] = [];\r\n\r\n  constructor(private element: HTMLElement,\r\n    private taskQueue: TaskQueue,\r\n    private ea: EventAggregator,\r\n    private splitService: SplitService) { }\r\n\r\n  attached() {\r\n    const isVertical: boolean = typeof this.vertical === \"string\" ? JSON.parse(this.vertical) : this.vertical;\r\n\r\n    this.options = {\r\n      sizes: this.sizes,\r\n      minSize: this.minSize,\r\n      gutterSize: this.gutterSize,\r\n      direction: isVertical ? splitDirection.vertical : splitDirection.horizontal,\r\n      cursor: this.cursor\r\n    };\r\n\r\n    if (this.initialize) this.taskQueue.queueMicroTask(() => this.initializeSplit());\r\n\r\n    this.subscriptions.push(\r\n      this.ea.subscribe(splitEvents.create, (options?: SplitOptions) => this.initializeSplit(options)),\r\n      this.ea.subscribe(splitEvents.destroy, () => this.destroySplit()),\r\n      this.ea.subscribe(splitEvents.setSize, (sizes: number[]) => this.setSizes(sizes))\r\n    );\r\n  }\r\n\r\n  detached() {\r\n    this.destroySplit();\r\n    this.subscriptions.forEach((subs: Subscription) => subs.dispose());\r\n  }\r\n\r\n  verticalChanged(newValue) {\r\n    if (newValue !== undefined && this.options) {\r\n      this.options.direction = newValue;\r\n    }\r\n  }\r\n\r\n  private initializeSplit(options?: SplitOptions) {\r\n    this.destroySplit();\r\n\r\n    const splitOptions = options || this.options;\r\n\r\n    this.splitjs = this.splitService.initialize(this.element, splitOptions);\r\n  }\r\n\r\n  private destroySplit() {\r\n    if (this.splitjs !== undefined) this.splitjs = this.splitjs.destroy();\r\n  }\r\n\r\n  private setSizes(sizes: number[]) {\r\n    if (this.splitjs !== undefined) this.splitjs.setSizes(sizes);\r\n  }\r\n}\r\n"]}